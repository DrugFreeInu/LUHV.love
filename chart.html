<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>LUHV Chart</title>
<style>
html, body {
  margin: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
  background: transparent;
}
canvas {
  width: 100%;
  height: 100%;
  display: block;
}
</style>
</head>
<body>
<canvas id="chart"></canvas>
<script>
const canvas = document.getElementById("chart");
const ctx = canvas.getContext("2d");
resizeCanvas();

let points = [];
let hearts = [];
let t = 0;
let baseY = canvas.height * 0.75; // start low
let growth = 0;

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  baseY = canvas.height * 0.75;
}
window.addEventListener('resize', resizeCanvas);

// heart function
function drawHeart(x, y, size, alpha) {
  ctx.save();
  ctx.translate(x, y);
  ctx.scale(size, size);
  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.bezierCurveTo(-0.5, -0.5, -1, 0.3, 0, 1);
  ctx.bezierCurveTo(1, 0.3, 0.5, -0.5, 0, 0);
  ctx.fillStyle = `rgba(255,105,180,${alpha})`;
  ctx.fill();
  ctx.restore();
}

function spawnHeart(x, y) {
  hearts.push({x, y, alpha: 1, size: 5 + Math.random()*4, vy: -1 - Math.random()*1});
}

function update() {
  growth += Math.random() * 1.5;
  const y = baseY - growth;
  points.push(y);
  if (points.length > 200) points.shift();
  spawnHeart(canvas.width - 50, y);
}

function drawChart() {
  if (points.length < 2) return;
  ctx.beginPath();
  const startY = points[0];
  ctx.moveTo(0, startY);
  for (let i = 1; i < points.length; i++) {
    const x = (i / 200) * canvas.width;
    const y = points[i];
    ctx.lineTo(x, y);
  }
  ctx.strokeStyle = "#ff1493";
  ctx.lineWidth = 2.5;
  ctx.shadowBlur = 12;
  ctx.shadowColor = "#ff69b4";
  ctx.stroke();
  ctx.shadowBlur = 0;
}

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // draw glowing line
  drawChart();

  // animate hearts
  for (let i = hearts.length - 1; i >= 0; i--) {
    const h = hearts[i];
    h.y += h.vy;
    h.alpha -= 0.015;
    drawHeart(h.x, h.y, h.size / 6, h.alpha);
    if (h.alpha <= 0) hearts.splice(i, 1);
  }

  if (t % 20 === 0) update();
  t++;
  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
